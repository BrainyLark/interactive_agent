INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:__main__:{'messages': [HumanMessage(content='Би өнөө орой 8 цаг 40 минутад үсээ засуулах гэсэн юм танай 1-р салбар дээр, болох уу?', additional_kwargs={}, response_metadata={}), AIMessage(content="Thought: I need to confirm the customer's preferred appointment time and check for conflicts at the barbershop. The customer wants an appointment tonight at 8:40 PM in the first branch. \nAction: I will first get the current datetime to check if the requested appointment time is in the future. \nObservation: [Tool execution happens]", additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 70, 'prompt_tokens': 855, 'total_tokens': 925, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_01aeff40ea', 'finish_reason': 'stop', 'logprobs': None}, id='run-6908db5b-9e45-4f87-af64-26eb8f3940fd-0', usage_metadata={'input_tokens': 855, 'output_tokens': 70, 'total_tokens': 925, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_qj6lZlfCXRAZ69gwmmXTI3sb', 'function': {'arguments': '{}', 'name': 'get_current_datetime'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 11, 'prompt_tokens': 927, 'total_tokens': 938, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_01aeff40ea', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-fc752d45-fc17-44bc-aa19-dcd75d40ff3c-0', tool_calls=[{'name': 'get_current_datetime', 'args': {}, 'id': 'call_qj6lZlfCXRAZ69gwmmXTI3sb', 'type': 'tool_call'}], usage_metadata={'input_tokens': 927, 'output_tokens': 11, 'total_tokens': 938, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='2025-01-09T12:43:36.533181', name='get_current_datetime', tool_call_id='call_qj6lZlfCXRAZ69gwmmXTI3sb'), AIMessage(content='Thought: The current datetime is 2025-01-09 at 12:43 PM, meaning the requested appointment time of 8:40 PM is indeed in the future. Next, I need to check if there is a conflict for that specific time at the first branch. \nAction: I will check for conflicting appointments at 2025-01-09T20:40:00 with a duration of 30 minutes. \nObservation: [Tool execution happens]', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 98, 'prompt_tokens': 962, 'total_tokens': 1060, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_01aeff40ea', 'finish_reason': 'stop', 'logprobs': None}, id='run-f2066bd3-bba2-49fa-98cb-2d1a3548cc0e-0', usage_metadata={'input_tokens': 962, 'output_tokens': 98, 'total_tokens': 1060, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_LTZhAxeSO7xgs8tY7HwnfyoO', 'function': {'arguments': '{"dt":"2025-01-09T20:40:00","duration":30}', 'name': 'check_conflicting_appointment'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 33, 'prompt_tokens': 1062, 'total_tokens': 1095, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_01aeff40ea', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-d8de47bd-5073-4988-966b-1cfad913b52c-0', tool_calls=[{'name': 'check_conflicting_appointment', 'args': {'dt': '2025-01-09T20:40:00', 'duration': 30}, 'id': 'call_LTZhAxeSO7xgs8tY7HwnfyoO', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1062, 'output_tokens': 33, 'total_tokens': 1095, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='Yes, you can order at 2025-01-09T20:40:00. Your operation is expected to take 30 minutes.', name='check_conflicting_appointment', tool_call_id='call_LTZhAxeSO7xgs8tY7HwnfyoO'), AIMessage(content='Thought: There is no conflict for the requested appointment time at 8:40 PM, and it is expected to take 30 minutes. Now, I need to confirm the appointment with the customer and get their name. \nAction: I will ask the customer for their name to proceed with the appointment confirmation. \nObservation: [Tool execution happens]', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 72, 'prompt_tokens': 1135, 'total_tokens': 1207, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1024}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_01aeff40ea', 'finish_reason': 'stop', 'logprobs': None}, id='run-78086dcc-c0c5-4c33-a292-0e35f60c4d47-0', usage_metadata={'input_tokens': 1135, 'output_tokens': 72, 'total_tokens': 1207, 'input_token_details': {'audio': 0, 'cache_read': 1024}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_BrQZ1UT6yaTvp8fcqS6wlsAX', 'function': {'arguments': '{"user_prompt":"Таны нэрийг хэлнэ үү?"}', 'name': 'ask_user_for_input'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 26, 'prompt_tokens': 1209, 'total_tokens': 1235, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_01aeff40ea', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-cf12dd38-6dcb-492c-8a91-33e106563101-0', tool_calls=[{'name': 'ask_user_for_input', 'args': {'user_prompt': 'Таны нэрийг хэлнэ үү?'}, 'id': 'call_BrQZ1UT6yaTvp8fcqS6wlsAX', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1209, 'output_tokens': 26, 'total_tokens': 1235, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='Эрдэнэ', name='ask_user_for_input', tool_call_id='call_BrQZ1UT6yaTvp8fcqS6wlsAX'), AIMessage(content='Thought: The customer has provided their name as Эрдэнэ. Now, I can proceed to set the appointment for them at 8:40 PM in the first branch. \nAction: I will set the appointment with the details: appointment time 2025-01-09T20:40:00, branch 1, name Эрдэнэ, and expected duration of 30 minutes. \nObservation: [Tool execution happens]', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 90, 'prompt_tokens': 1247, 'total_tokens': 1337, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_01aeff40ea', 'finish_reason': 'stop', 'logprobs': None}, id='run-42756d93-9b79-4b45-ac39-2bcaf175a40a-0', usage_metadata={'input_tokens': 1247, 'output_tokens': 90, 'total_tokens': 1337, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_y2Ez1soddbz56fJNNyo0SGs9', 'function': {'arguments': '{"appointment_time":"2025-01-09T20:40:00","branch":1,"name":"Эрдэнэ","expected_duration":30}', 'name': 'set_appointment'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 43, 'prompt_tokens': 1339, 'total_tokens': 1382, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_01aeff40ea', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-3763e8c1-b9b7-426e-8c34-df970b15c138-0', tool_calls=[{'name': 'set_appointment', 'args': {'appointment_time': '2025-01-09T20:40:00', 'branch': 1, 'name': 'Эрдэнэ', 'expected_duration': 30}, 'id': 'call_y2Ez1soddbz56fJNNyo0SGs9', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1339, 'output_tokens': 43, 'total_tokens': 1382, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content="{'created_date': '09/01/2025, 12:43:47', 'expected_duration': 30, 'branch': 1, 'id': 23, 'name': 'Эрдэнэ', 'operation': 'Trimming hair length shorter', 'appointment_datetime': '2025-01-09T20:40:00'}", name='set_appointment', tool_call_id='call_y2Ez1soddbz56fJNNyo0SGs9'), AIMessage(content='Thought: The appointment for Эрдэнэ has been successfully set for tonight at 8:40 PM in the first branch. \nFINAL STATE: Appointment set successfully for Эрдэнэ. We can end the process here.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 46, 'prompt_tokens': 1464, 'total_tokens': 1510, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_01aeff40ea', 'finish_reason': 'stop', 'logprobs': None}, id='run-f2c0a7cc-5a51-45db-8114-cecd4bd844f0-0', usage_metadata={'input_tokens': 1464, 'output_tokens': 46, 'total_tokens': 1510, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}
