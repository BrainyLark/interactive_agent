INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:__main__:{'messages': [SystemMessage(content='\n    You are a barbershop AI agent that makes haircut appointments for users. You MUST use the following tools to assist users:\n    - ask_user_for_input: Use this to get necessary information from the user\n    - check_conflicting_appointment: Use this to verify if the requested time slot is available\n    - set_appointment: Use this to create the final appointment\n\n    For each appointment, you need to:\n    1. Gather necessary information using ask_user_for_input (name, preferred date and time)\n    2. Check if the time slot is available using check_conflicting_appointment (duration is 45 minutes)\n    3. Create the appointment using set_appointment\n\n    Always use these tools to complete the task. Do not provide fictional responses.\n', additional_kwargs={}, response_metadata={}, id='2911da2c-7ee7-4521-a071-b68870ff7f21'), HumanMessage(content='Hi, I want to have my hair cut?', additional_kwargs={}, response_metadata={}, id='44f47a17-abad-48a3-89fb-08abb8bad625'), AIMessage(content="I can help you with that! First, I'll need some information from you. \n\nWhat is your name?", additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 24, 'prompt_tokens': 517, 'total_tokens': 541, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_0aa8d3e20b', 'finish_reason': 'stop', 'logprobs': None}, id='run-1a5e880d-126d-4a6c-858e-83b0960a6a13-0', usage_metadata={'input_tokens': 517, 'output_tokens': 24, 'total_tokens': 541, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:__main__:{'messages': [SystemMessage(content='\n    You are a barbershop AI agent that makes haircut appointments for users. You MUST use the following tools to assist users:\n    - ask_user_for_input: Use this to get necessary information from the user\n    - check_conflicting_appointment: Use this to verify if the requested time slot is available\n    - set_appointment: Use this to create the final appointment\n\n    For each appointment, you need to:\n    1. Gather necessary information using ask_user_for_input (name, preferred date and time)\n    2. Check if the time slot is available using check_conflicting_appointment (duration is 45 minutes)\n    3. Create the appointment using set_appointment\n\n    Always use these tools to complete the task. Do not provide fictional responses.\n', additional_kwargs={}, response_metadata={}, id='5e52427b-4e77-4d2b-9a41-df9485710e66'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_P9iv3kvEELp6Ptx6lf5rHtgE', 'function': {'arguments': '{"user_prompt": "Please enter your name."}', 'name': 'ask_user_for_input'}, 'type': 'function'}, {'id': 'call_rQlHkIRbJnyePID6i2zqo7h8', 'function': {'arguments': '{"user_prompt": "Please enter your preferred date and time for the appointment (in ISO format, e.g., 2023-10-01T14:00:00)."}', 'name': 'ask_user_for_input'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 86, 'prompt_tokens': 503, 'total_tokens': 589, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_0aa8d3e20b', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-42283855-50df-4603-940f-a9b3f621d299-0', tool_calls=[{'name': 'ask_user_for_input', 'args': {'user_prompt': 'Please enter your name.'}, 'id': 'call_P9iv3kvEELp6Ptx6lf5rHtgE', 'type': 'tool_call'}, {'name': 'ask_user_for_input', 'args': {'user_prompt': 'Please enter your preferred date and time for the appointment (in ISO format, e.g., 2023-10-01T14:00:00).'}, 'id': 'call_rQlHkIRbJnyePID6i2zqo7h8', 'type': 'tool_call'}], usage_metadata={'input_tokens': 503, 'output_tokens': 86, 'total_tokens': 589, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='erdenebileg', name='ask_user_for_input', id='f7d8d0d9-76da-40ce-a2b7-292dfde66648', tool_call_id='call_P9iv3kvEELp6Ptx6lf5rHtgE'), ToolMessage(content='2024 January 8th in the morning 10:30AM', name='ask_user_for_input', id='03c83837-3c76-4832-a42b-591b094c97f2', tool_call_id='call_rQlHkIRbJnyePID6i2zqo7h8'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_kE1P1vKMmqZ3giNaZLR1Mix2', 'function': {'arguments': '{"dt":"2024-01-08T10:30:00","duration":45}', 'name': 'check_conflicting_appointment'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 33, 'prompt_tokens': 619, 'total_tokens': 652, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_0aa8d3e20b', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-1ec75fec-270c-4db6-9cbe-d5a3304abae9-0', tool_calls=[{'name': 'check_conflicting_appointment', 'args': {'dt': '2024-01-08T10:30:00', 'duration': 45}, 'id': 'call_kE1P1vKMmqZ3giNaZLR1Mix2', 'type': 'tool_call'}], usage_metadata={'input_tokens': 619, 'output_tokens': 33, 'total_tokens': 652, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='Yes, you can order at 2024-01-08T10:30:00. Your operation is expected to take 45 minutes.', name='check_conflicting_appointment', id='9ec832f4-19bf-4bb5-80ab-fd757767f95c', tool_call_id='call_kE1P1vKMmqZ3giNaZLR1Mix2'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_Vb1XbVISSsRikIyQKAG8Jiwa', 'function': {'arguments': '{"appointment_time":"2024-01-08T10:30:00","branch":1,"name":"erdenebileg","expected_duration":45}', 'name': 'set_appointment'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 43, 'prompt_tokens': 692, 'total_tokens': 735, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_0aa8d3e20b', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-a393dc79-21ae-4695-9d3a-a95455cb9410-0', tool_calls=[{'name': 'set_appointment', 'args': {'appointment_time': '2024-01-08T10:30:00', 'branch': 1, 'name': 'erdenebileg', 'expected_duration': 45}, 'id': 'call_Vb1XbVISSsRikIyQKAG8Jiwa', 'type': 'tool_call'}], usage_metadata={'input_tokens': 692, 'output_tokens': 43, 'total_tokens': 735, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='{"created_date": "07/01/2025, 16:33:28", "expected_duration": 45, "branch": 1, "operation": "Trimming hair length shorter", "id": 5, "name": "erdenebileg", "appointment_datetime": "2024-01-08T10:30:00"}', name='set_appointment', id='f58726af-8d41-4176-a625-7a8a48d17da7', tool_call_id='call_Vb1XbVISSsRikIyQKAG8Jiwa'), AIMessage(content='Your appointment has been successfully scheduled for **January 8, 2024, at 10:30 AM**. The expected duration is **45 minutes**. Thank you, Erdenebileg!', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 43, 'prompt_tokens': 817, 'total_tokens': 860, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_0aa8d3e20b', 'finish_reason': 'stop', 'logprobs': None}, id='run-20cf04bc-fe52-416e-917d-1570d0bab49b-0', usage_metadata={'input_tokens': 817, 'output_tokens': 43, 'total_tokens': 860, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}
